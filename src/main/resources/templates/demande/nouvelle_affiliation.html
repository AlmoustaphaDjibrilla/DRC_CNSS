<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ajout d'une nouvelle demande</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<div class="container">
  <h1 class="text-center mb-5">Enregistrement d'une nouvelle demande d'affiliation</h1>

  <form class="row g-3 needs-validation" method="post" enctype="multipart/form-data" th:action="@{/demande/enregistrer_demande_affiliation}" th:object="${nouvelleDemandeAffiliation}" novalidate>
    <div class="col-md-4">
      <label for="domaineActivite" class="form-label">Domaine activité</label>
      <select class="form-select" id="domaineActivite" th:field="${nouvelleDemandeAffiliation.domaineActivite}" required>
        <option th:value="prive" selected>Privé</option>
        <option th:value="administratif">Administratif</option>
        <option th:value="gens_de_maison">Gens de maison</option>
      </select>
      <div class="invalid-feedback">
        Veuillez choisir un domaine d'activité.
      </div>
    </div>

    <div class="col-md-3">
      <label for="dateEmbauche" class="form-label">Date embauche (1er salarié)</label>
      <input type="date" class="form-control" id="dateEmbauche" th:field="${nouvelleDemandeAffiliation.dateEmbauche}" required>
      <div class="invalid-feedback">
        Veuillez entrer une date d'embauche valide.
      </div>
    </div>

    <div class="col-md-3">
      <label for="inputNbrSalaries" class="form-label">Nombre de salariés</label>
      <input min="0" type="number" class="form-control" id="inputNbrSalaries" th:field="${nouvelleDemandeAffiliation.nombreSalaries}" required>
      <div class="invalid-feedback">
        Veuillez entrer un nombre valide de salariés.
      </div>
    </div>

    <div class="col-md-5">
      <label for="rccm" class="form-label">Numéro RCCM</label>
      <input required type="text" class="form-control" id="rccm" th:field="${nouvelleDemandeAffiliation.rccm}">
      <div class="invalid-feedback">
        Le numéro RCCM est obligatoire.
      </div>
    </div>

    <div class="col-md-5">
      <label for="nif" class="form-label">NIF</label>
      <input type="text" class="form-control" id="nif" th:field="${nouvelleDemandeAffiliation.nif}" required>
      <div class="invalid-feedback">
        Le numéro NIF est obligatoire.
      </div>
    </div>

    <div class="col-md-6">
      <label for="inputSigle" class="form-label">Sigle Société</label>
      <input type="text" class="form-control" id="inputSigle" th:field="${nouvelleDemandeAffiliation.sigleSociete}" required>
      <div class="invalid-feedback">
        Veuillez entrer le sigle de la société.
      </div>
    </div>

    <div class="col-md-4">
      <label for="selectAssurance" class="form-label">Type d'assurance</label>
      <select id="selectAssurance" class="form-select" th:field="${nouvelleDemandeAffiliation.typeAssurance}" required>
        <option th:value="obligatoire" selected>Obligatoire</option>
        <option th:value="volontaire">Volontaire</option>
      </select>
      <div class="invalid-feedback">
        Veuillez sélectionner un type d'assurance.
      </div>
    </div>

    <div class="col-12">
      <label for="inputAddress" class="form-label">Adresse</label>
      <input type="text" class="form-control" th:field="${nouvelleDemandeAffiliation.adresse}" id="inputAddress" placeholder="1234 Boulevard Alassane Ouattara Niamey" required>
      <div class="invalid-feedback">
        Veuillez entrer une adresse valide.
      </div>
    </div>

    <div class="col-md-4">
      <label for="region" class="form-label">Région</label>
      <select id="region" class="form-select" th:field="${nouvelleDemandeAffiliation.region}" required>
        <option th:value="default" selected>Sélectionner une région</option>
        <option th:value="Agadez">Agadez</option>
        <option th:value="Diffa">Diffa</option>
        <option th:value="Dosso">Dosso</option>
        <option th:value="Maradi">Maradi</option>
        <option th:value="Niamey">Niamey</option>
        <option th:value="Tahoua">Tahoua</option>
        <option th:value="Tillabery">Tillabery</option>
        <option th:value="Zinder">Zinder</option>
      </select>
      <div class="invalid-feedback">
        Veuillez sélectionner une région.
      </div>
    </div>

    <div class="col-md-4">
      <label for="ville" class="form-label">Ville</label>
      <select id="ville" class="form-select" required>
        <option selected>Agadez</option>
        <option>Diffa</option>
        <option>Dosso</option>
        <option>Maradi</option>
        <option>Niamey</option>
        <option>Tahoua</option>
        <option>Tillabery</option>
        <option>Zinder</option>
      </select>
      <div class="invalid-feedback">
        Veuillez sélectionner une ville.
      </div>
    </div>

    <div class="col-md-2">
      <label for="boitePostale" class="form-label">Boite Postale</label>
      <input type="text" class="form-control" id="boitePostale" th:field="${nouvelleDemandeAffiliation.boitePostale}">
      <div class="invalid-feedback">
        Veuillez entrer une boîte postale valide.
      </div>
    </div>

    <div class="col-12">
      <label for="piecesJointes" class="form-label">Pièces jointes</label>
      <input multiple type="file" name="piecesJointes"  class="form-control" id="piecesJointes">
      <div class="invalid-feedback">
        Veuillez ajouter au moins un fichier.
      </div>
    </div>

    <div class="col-12">
      <button type="submit" class="btn btn-primary">Enregistrer</button>
    </div>

  </form>
</div>

<script>
  (function () {
    'use strict'
    var forms = document.querySelectorAll('.needs-validation')
    Array.prototype.slice.call(forms)
            .forEach(function (form) {
              form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                  event.preventDefault()
                  event.stopPropagation()
                }
                form.classList.add('was-validated')
              }, false)
            })
  })()
</script>

</body>
</html>
